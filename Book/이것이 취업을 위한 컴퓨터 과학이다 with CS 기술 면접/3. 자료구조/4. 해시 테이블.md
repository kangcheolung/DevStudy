# 해시 테이블

## 해시 테이블

해시 테이블은 키와 값의 대응으로 이루어진 표(테이블)와 같은 형태의 자료구조를 말합니다. 키는 해시 테이블에 대한 입력, 값은 키를 통해 얻고자 하는 데이터라고 볼 수 있습니다. 

해시 테이블 구조를 살펴 보자면 키를 통해 얻고자 하는 데이터는 “”버킷””에 저장되어 있습니다. 버킷은 여러 개가 존재하며, 여러 버킷들은 배열을 형성합니다. 해시 함수는 키를 인자로 활용해 인덱스를 반환합니다. 이 인덱스는 곧 버킷 배열의 인덱스에 해당합니다. 

## 해시 함수

해시 함수는 임의의 길이를 지닌 데이터를 고정된 길이의 데이터로 변환하는 단방향 함수를 말합니다. 단방향 함수이기 때문에 특정 입력 데이터를 고정된 길이의 해시 값으로 변환할 수는 있어도, 반대로 해시 값을 토대로 어떤 데이터가 입력되었는지를 도출하기는 어렵습니다. 

해시 함수의 연산 방법은 해시 알고리즘이라고 합니다. 해시 알고리즘은 대표적으로 MD5, SHA-1, SHA-256, SHA-512, SHA3, HMAC 등이 있습니다. 같은 데이터라 하더라도 적용된 해시 알고리즘이 다르면 도출되는 해시 값의 길이나 값이 달라집니다. 

해시 값은 문자열이 한 글자만 달라져도 크게 달라질 수 있습니다. 예를 들어 ‘hanbitmedia’라는 문자열에 공백 하나를 추가해 ‘hanbit media’에 대한 해시 값을 구하면 완전히 다른 결과가 나오게됩니다. 

## 해시 테이블의 장점과 단점

해시 테이블의 장점은 “”빠른 검색 속도””입니다. 일반적인 상황에서 해시 테이블을 활용한 검색, 삽입, 삭제 연산의 시간 복잡도는 O(1)입니다. 이는 입력과 무관하게 항상 일정한 속도를 보장한다는 의미입니다. 

해시 테이블의 단점은 속도가 빠른 만큼 상대적으로 많은 메모리 공간이 소모됩니다. 데이터가 매우 많을 경우 공간 복잡도가 시간 복잡도만큼 우수하지 않다는 의미입니다. 뿐만 아니라 해시 테이블을 이용할 때는 해시 충돌이라는 문제도 해결해야합니다. 

## 해시 충돌

해시 충돌이란 서로 다른 키에 대해 같은 해시 값이 대응되는 상황을 의미합니다. 이는 다른 이름에 같은 전화번호가 대응된 상황, 혹은 다른 ISBN에 같은 책이 대응된 상황과도 같습니다. 

해시 테이블에서 해시 충돌이 발생하면 2개 이상의 키에 같은 데이터가 대응되는 상황이 발생합니다. 이를 해결하기 위한 방법으로 체이닝과 개방 주소법이 대표적입니다. 

### 체이닝

체이닝이란 충돌이 발생한 데이터를 연결 리스트로 추가하는 방법입니다. 서로 다른 키가 같은 위치로 해시 되어도 단순히 연결 리스트의 노드가 추가될 뿐이기 때문에, 하나의 테이블 인덱스에 여러 데이터가 연결 리스트의 노드로써 존재할 수 있습니다. 

체이닝은 아이디어와 구현은 단순하지만, 충돌이 발생할 때마다 연결 리스트의 노드가 추가된다면 빠른 속도라도해시 테이블의 장점을 살리지 못할 수도 있습니다. 

### 개방 주소법

개방 주소법이란 충돌이 발생했을 때, 충돌이 발생한 버킷의 인덱스가 아닌 다른 인덱스에 데이터를 저장하는 방법입니다. 쉽게 말해 ‘자리 없는 인덱스를 피해 다른 인덱스를 알아보자’는 해결 방식이라고 할 수 있습니다. 

총돌이 발생했을 때 비어 있는 다른 버킷의 인덱스를 찾는 과정을 흔히 ‘’’조사’’’한다고 표현합니다. 개방 주소법은 이 조사 방법에 따라 세부적으로 나눌 수 있는데 그 중 하나가 “”선형 조사법””입니다. 

**“”선형 조사법””**

선형 조사법은 충돌이 발생했을 때, 충돌이 발생한 인덱스의 다음 인덱스부터 순차적으로 가용한 인덱스를 찾아 나서는 방법입니다. 그러나 선형 조사법은 해시 충돌이 발생하는 인덱스 인근에 충돌이 발생한 여러 데이터가 몰려 저장될 수 있다는 점이 있습니다. 이러한 현상을 데이터의 “”군집화””라고 하며, 군집화 현상은 오랜 순차 탐색이 필요해 성능 약화로 이어질 수 있다. 

### 이중 해싱

이중 해싱은 말 그대로 2개의 해시 함수를 사용하는 방법으로, 충돌이 발생했을 때 다른 해시 함수에 대한 해시 값만큼 떨어진 거리에 위치한 인덱스를 찾는 방법입니다. 

이렇게 해시 함수를 통해 무작위로 인덱스가 생성될 수 있다면 선형 조사법의 군집화 문제를 상당 부분 피할 수 있게 됩니다.