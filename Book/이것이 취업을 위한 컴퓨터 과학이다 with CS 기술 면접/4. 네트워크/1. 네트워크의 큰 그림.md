# 네트워크의 큰 그림

## 네트워크의 기본 구조

네트워크는 노드와 간선으로 이루어진 자료구조라는 점에서 그래프의 형태를 띤다고 할 수 있습니다. 네트워크 기기가 노드이고, 네트워크 기기 간에 정보를 주고 받는 유무선의 통신 매체가 간선인셈입니다. 

네트워크 상에서 노드와 노드 사이의 연결 구조는 **“”네트워크 토폴로자””**라고 부릅니다.  노드가 어떻게 연결되고 배치되느냐에 따라 다음 그림과 같은 망형, 트리형, 링형 등의 유형으로 나눌 수 있습니다. 

이때 네트워크의 가장자리에 위치하면서 네트워크를 통해 주고받는 정보를 최소로 송신하고 최종 수신하는 노드를 “”호스트””라고 부릅니다. 우리가 흔히 접하는 대부분의 네트워크 기기가 바로 호스트입니다. 예를 들어 노트북의 웹 브라우저를 통해 구글 홈페이지에 접속했다면 노트북과 구글의 서버 컴퓨터가 각각 호스트로서 정보를 주고 받은 것입니다. 

이 과정에서 노트북처럼 “”요청””을 보내는 호스트를 “”클라이언트””, 구글의 서버 컴퓨터처럼 “”응답””을 보내는 호스트를 “”서버””라고 합니다. 

또한 네트워크를 그래프로 간주했을 때 중간에 위치한 노드, 즉 중간 노드는 가장자리에 위치한 호스트가 주고받는 정보들을 원하는 수신지까지 안정적으로 전송하는 역할을 합니다. 이러한 중간 노드로써의 역할을 수행하는 여러 네트워크 장비들이 있는데요.  스위치와 라우터, 공유기 등이 해당됩니다. 

## LAN과 WAN

네트워크는 규모에 따라 LAN과 WAN으로 나뉩니다. 

### LAN

근거리 네트워크를 의미하는 “”LAN””은 이름 그대로 가정이나 기업처럼 비교적 가까운 거리를 연결하는 한정된 공간에서의 네트워크를 말합니다. 집이나 사무실에 있는 공유기를 통해 모든 네트워크 기기가 통신하고 있다면 LAN이 공유기를 기준으로 구축되었다고 할 수 있습니다. 해당 공유기와 연결된 네트워크 기기들은 모두 같은 네트워크(LAN)에 속해 있다고 인식합니다. 

### WAN

원거리 네트워크를 의미하는 “”WAN””을 통해 LAN 간 통신이 이루어집니다. WAN이 인터넷을 가능하게 만드는 네트워크라고 할 수 있습니다. WAN은 일반적으로 ISP라는 인터넷 서비스 업체가 구축하고 관리합니다. 대표적인 국내 ISP 업체로는 KT,LG유플러스 등이 있습니다. 

## 패킷 교환 네트워크

### 패킷

네트워크를 통해 송수신되는 데이터의 단위를 패킷이라고 합니다. 오늘날의 네트워크는 패킷 단위로 주고 받는 정보를 쪼개서 송수신하고 수신지에서 재조립하며 패킷을 주고받는 ‘패킷 교환 네트워크’가 대부분입니다. 

하나의 패킷은 페이로드와 헤더로 구성되어 있으며, 때로는 트레일러라는 정보가 포함되기도 합니다. 

- 페이로드: 패킷에서 송수신하고자 하는 데이터
- 헤더와 트레일러: 패킷에 추가되는 부가 정보

## 주소의 개념과 전송 방식

### 주소

주소는 패킷의 헤더에 명시되는 정보로, 네트워크에서 사용되는 대표적인 주소로는 IP 주소와 MAC 주소가 있습니다. 

주소를 바탕으로 다양한 수신지 유형을 지정해 패킷을 보낼 수 있습니다. 가령 수신지를 특정 호스트 하나로 지정할 수도 있고, 네트워크 내 모든 호스트로 지정할 수도 있습니다. 

- 유니캐스트: 송신지와 수신지가 일대일로 메세지를 주고받는 전자의 전송 방식
- 브로드캐스트: 네트워크상의 모든 호스트에게 메세지를 전송하는 후자의 전송 방식
- 브로드캐스트 도메인: 브로드캐스트가 전송되는 범위, 호스트가 같은 브로드캐스트 도메인에 속해 있는 경우에는 같은 LAN에 속해 있다고 간주합니다.
- 멀티캐스트: 네트워크 내의 동일 그룹에 속한 호스트에게만 전송하는 송수신 방법
- 애니캐스트: 네트워크 내의 동일 그룹에 속한 호스트 중 가장 가까운 호스트에게 전송하는 송수신 방법

---

## 두 호스트가 패킷을 주고받는 과정

### 프로토콜

프로토콜은 네트워크에서 통신을 주고받는 노드 간의 합의된 규칙이나 방법을 말합니다. 패킷을 주고받는 호스트와 네트워크 장비들이 서로 주고받는 정보를 이해하려면 같은 프로토콜을 이해해야 하고, 같은 프로토콜로 통신해야 합니다. 프로토콜마다 목적과 특징이 다릅니다. 

- IP:  네트워크 간의 주소를 지정한다는 목적을 지닌 프로토콜이다.
- ARP: IP와 MAC 주소를 대응시킨다는 목적을 지닌 프로토콜이다.
- HTTPS: 보안상 HTTP에 비해 안전함
- TCP: UDP에 비해 신뢰성이 높다는 특징을 가짐.

### 네트워크 참조 모델

통신이 이루어지는 단계를 계층적으로 표현한것을 네트워크 참조 모델이라고 합니다. 패킷을 송신하는 쪽에서는 상위 계층에서 하위 계층으로 정보를 보내고, 패킷을 수신하는 쪽에서는 하위 계층에서 상위 계층으로 정보를 받아들이게 됨

## OSI 모델

OSI 모델은 국제 표준화 기구(ISO)에서 만든 네트워크 참조 모델로, 통신 단계를 7개의 계층으로 나눠 OSI 7계층이라고 부른다. OSI 모델은 다음과 같이 물리 계층, 데이터 링크 계층, 네트워크 계층, 전송 계층, 세션 계층, 표현 계층, 응용 계층으로 구성되어 있다. 

![image.png](%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%EC%9D%98%20%ED%81%B0%20%EA%B7%B8%EB%A6%BC/image.png)

### 물리 계층

물리 계층은 가장 최하위 계층으로, 비트 신호를 주고 받는 계층입니다. 컴퓨터는 0과 1만을 이해할 수 있기 때문에 네트워크를 통해 주고받는 정보 또한 0과 1로 이루어진 신호로 구성됩니다. 물리 계층은 이러한 신호를 유무선 통신 매체를 통해 운반하는 계층입니다. 

### 데이터 링크 계층

데이터 링크 계층은 같은 LAN에 속한 호스트끼리 올바르게 정보를 주고받기 위한 계층입니다. 이를 위해 같은 네트워크에 속한 호스트를 식별할 수 있는 주소(MAC 주소)를 사용하고, 물리 계층을 통해 주고받는 정보에 오류가 없는지 확인하기도 합니다. 짐작할 수 있듯, 물리 계층과 데이터 링크 계층은 서로 밀접하게 연관된 계층이며, 하드웨어와 밀접하게 맞닿아 있는 계층입니다. 

### 네트워크 계층

네트워크 계층은 네트워크 간 통신을 가능하게 하는 계층입니다. 데이터 링크 계층이 기본적으로 같은 LAN에 속한 호스트끼리 올바르게 정보를 주고받기 위해 필요한 계층이라면, 네트워크 계층은 LAN을 넘어 다른 네트워크와 통신을 주고받기 위해 필요한 계층입니다. 따라서 네트워크 간 통신 과정에서 호스트를 식별할 수 있는 주소(IP 주소)가 필요합니다. 네트워크 계층에서 대표적으로 사용되는 프로토콜이 바로 IP입니다. 

### 전송 계층

네트워크를 통해 송수신되는 패킷은 전송 도중에 유실될 때도 있고, 순서가 뒤바뀔 때도 있습니다. 전송 계층은 이러한 상황에 대비해 신뢰성 있는 전송을 가능하게 하는 계층입니다. 또한 포트라는 정보를 통해 특정 응용 프로그램과의 연결 다리 역할을 수행하는 계층이기도 합니다. 전송 계층에 속한 대표적인 프로토콜에는 TCP와 UDP가 있습니다. 

### 세션 계층

세션 계층은 응용 프로그램 간의 연결 상태를 의미하는 세션을 관리하기 위한 계층입니다. 즉, 응용 프로그램 간의 연결 상태를 유지하거나 새롭게 생성하고, 필요하다면 연결을 끊는 역할을 합니다. 

### 표현 계층

표현 계층은 마치 번역가와 같은 역할을 하는 계층으로, 인코딩과 압축, 암호화와 같은 작업을 수행합니다. 세션 계층과 표현 계층은 다른 계층과 달리, 두 계층을 명확하게 구분하지 않거나 응용 계층에 포함하여 간주하는 경우가 많습니다. 

### 응용 계층

응용 계층은 사용자와 가장 밀접하게 맞닿아 있어 여러 네트워크 서비스를 제공하는 계층으로, 중요한 프로토콜들이 다수 포함되어 있습니다. 응용 계층에 속한 대표적인 프로토콜에는 HTTP, HTTPS, DNS 등이 있습니다. 

## TCP/IP 모델

TCP/IP 4계층이러고도 불리는 TCP/IP 모델은 네트워크 엑세스 계층과 인터넷 계층, 전송 계층, 응용 계층으로 구성되어 있습니다. OSI 모델은 주로 네트워크의 이론적 기술을 목적으로 사용하는 반면, TCP/IP 모델은 구현과 프로토콜에 중점을 둔 네트워크 참조 모델입니다. 

![image.png](%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%EC%9D%98%20%ED%81%B0%20%EA%B7%B8%EB%A6%BC/image%201.png)

- 네트워크 액세스 계층: 링크 계층 또는 네트워크 인터페이스 계층이라고도 부르는데, 이는 OSI 모델의 데이터 링크 계층과 유사합니다.
- 인터넷 계층: OSI 모델의 네트워크 계층과 유사
- 전송 계층: OSI 모델의 전송 계층과 유사
- 응용 계층:  OSI 계층의 세션, 표현, 응용 계층을 합친 것과 유사합니다.

## 캡슐화와 역캡슐화

프로토콜과 네트워크 참조 모델을 토대로 이뤄지는 패킷의 송수신 과정 중 송신 과정에서는 캡슐화가 이뤄지고, 수신 과정에서는 역캡슐화가 이뤄집니다. 이 부분을 이해하려면 앞서 학습한 네트워크 계층 구조를 통한 송수신과 패킷의 구조를 상기해 보아야합니다.

- 패킷을 송신하는 쪽에서는 상위 계층에서 하위 계층으로 정보를 보내고, 패킷을 수신하는 쪽에서는 하위 계층에서 상위 계층으로 정보를 받아들인다.
- 네트워크 계층 구조를 이용하면 프로토콜을 계층별로 구성할 수 있다.
- 하나의 패킷은 헤더와 페이로드(때로는 트레일러까지)를 포함하며, 프로토콜의 목적과 특징에 따라 헤더의 내용이 달라질 수 있다.

즉, 각 계층에서는 어떤 정보를 송신할 때 상위 계층으로부터 내려받은 패킷을 페이로드 삼아, 각 계층에 포함된 프로토콜의 각기 다른 목적과 특징에 따라 헤더 혹은 트레일러를 덧붙인 다음 하위 계층으로 전달합니다. 상위 계층의 패킷이 하위 계층의 페이로드로 간주되는 것입니다. 

### 캡슐화

캡슐화란 이렇게 송신 과정에서 헤더(및 트레일러)를 추가해 나가는 과정을 의미합니다. 

### 역캡슐화

역캡슐화란 캡슐화 과정에서 붙인 헤더(및 트레일러)를 각 계층에서 확인한 뒤 제거하는 과정을 의미한다. 

이때 유의할 점은 각 계층에서 주고받는 패킷을 지칭하는 이름이 다르다는 것입니다. 다음과 같이 OSI 모델을 기준으로 계층마다 패킷을 부르는 이름이 다릅니다. 

| 계층 | 패킷의 이름 |
| --- | --- |
| 그 이상의 계층 | 데이터(data) 또는 메시지(message) |
| 전송 계층 | TCP 기반 패킷의 경우: 세그먼트(segment) 
UDP 기반 패킷의 경우: 데이터그램(datagram) |
| 네트워크 계층 | 패킷(아하 IP 패킷) 또는 데이터그램 |
| 데이터 링크 계층 | 프레임(frame) |
| 물리 계층 | 심볼(symbol) 또는 비트(bit) |

ㅇㅇ