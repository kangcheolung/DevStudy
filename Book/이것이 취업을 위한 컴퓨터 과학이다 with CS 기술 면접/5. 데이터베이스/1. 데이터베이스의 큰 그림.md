# 데이터베이스의 큰 그림

# 데이터베이스와 DBMS

데이터베이스란 원하는 기능을 동작시키기 위해 마땅히 저장해야 하는 정보의 집합입니다. 그리고 DBMS는 데이터베이스를 관리하기 위한 수단입니다. 

## DBMS의 종류

DBMS는 크게 관계형 데이터베이스 관리 시스템(RDBMS)과 NoSQL 데이터베이스 관리 시스템으로 나눠집니다. RDBMS는 MySQL, Oracle, SQLite, PostgreSQL, MariaDB, Microsoft SQL Server 등이 있으며, NoSQL DBMS는 MongoDB, Redis 등이 있습니다.

## 서버로서의 DBMS

네트워크에서 클라이언트가 서버에 요청을 보내듯, DBMS 클라이언트는 DBMS에 쿼리를 보냅니다. 대표적인 데이터베이스 언어인 SQL은 RDBMS에서 데이터를 조작하고 관리하기 위한 언어로, 이름 그대로 데이터베이스 질의하기 위한 구조화된 언어를 말합니다. 

SQL은 크게 4종류로 분류됩니다. 데이터 정의를 위한 **DDL**, 데이터 조작을 위한 **DML**, 데이터 제어를 위한 **DCL**, 트랜잭션 제어하기 위한 **TCL**입니다. 

### DDL: CREATE, ALTER, DROP, TRUNCATE

### DML: SELECT, INSERT, UPDATE, DELETE

### DCL: COMMIT, ROLLBACK

### TCL: GRANT, REVOKE

## 파일 대신 데이터베이스를 이용하는 이유

- 데이터 일관성 및 무결성 제공이 어렵다.
- 불필요한 중복 저장이 많아짐
- 정교한 검색이 어려움
- 백업 및 복구가 어렵다.

# 데이터베이스의 저장 단위와 트랜잭션

## 데이터베이스 저장 단위

데이터베이스에는 다양한 속성을 가진 독립적 객체들이 저장될 수 있습니다. 이때 ‘독립적으로 존재할 수 있는 객체’를 엔터티라고 합니다. 속성은 엔터티의 특성을 의미합니다. 그리고 데이터베이스에 저장된 속성을 필드라고 부릅니다. 

RDBMS에서 표현되는 이차원 테이블 형태의 엔터티 집합은 릴레이션이라고도 부릅니다. 또 NoSQL DBMS의 일종인 MongoDB에서는 엔터티 집합을 컬렉션이라는 단위로 표현합니다. 

레코드는 데이터베이스에 ‘저장된 대상’이라고 할 수 있습니다. 데이터베이스에 ‘기록’된 각각의 엔터티를 레코드라고 부르는 셈입니다.

RDBMS에서는 개별 레코드를 테이블의 행으로 표현하고, 필드를 열로 표현합니다. 또한 NoSQL DBMS에서는 개별 레코드를 Json 형태의 데이터인 도큐먼트라는 단위로 표현하고, 필드를 Json 키의 형태로 표현합니다. 

## 스키마

스키마는 데이터베이스에 저장되는 레코드의 구조와 제약 조건을 정의한 것으로, 레코드가 지켜야할 틀이자 청사진이라고 볼 수 있습니다. 

앞서 RDBMS에서는 레코드를 테이블 내 행으로 저장하고, NoSQL의 일종인 MongoDB에서는 컬렉션 내 도큐먼트로 저장한다고 했습니다. 따라서 RDBMS에서는 명확한 스키마가 정의되며, 레코드들은 이 스키마로 정해진 테이블의 구조, 필드의 데이터 타입 및 제약 조건을 따라야 합니다. 

반면, NoSQL에서는 명확한 스키마가 정의되지 않아서 NoSQL 데이터베이스를 스키마-리스 데이터베이스라고도 부릅니다. 레코드들이 지켜야할 구조와 제약 조건에 제한이 없어 RDBMS보다 자유로운 형태의 레코드를 저장할 수 있습니다. 

## 트랜잭션과 ACID

트랜잭션은 데이터베이스와의 논리적 상호작용의 단위를 의미합니다. 데이터베이스가 처리하는 작업의 단위를 나타내므로 초당 트랜잭션이라는 지표로 데이터베이스의 작업 성능을 나타내기도 합니다. 유의할 점은 트랜잭션이 하나의 쿼리만 포함하는 것이 아니라는 점입니다. 트랜잭션은 2개 이상의 쿼리가 포함될 수 있습니다. 

트랜잭션이 지켜야할 성질에는 크게 4가지가 있습니다. 이를 각 단어의 앞글자만 따서 ACID라고 합니다. 원자성, 일관성, 격리성, 지속성이 있습니다.

- 원자성: 하나의 트랜잭션 결과가 모두 성공하거나 모두 실패하는 성질을 의미합니다.
- 일관성: 트랜잭션 전후로 일관된 상태를 유지하는 성질입니다. 여기서 ‘일관된 상태’란 데이터베이스가 지켜야하는 일련의 규칙들을 지키는 상태를 의미합니다.
- 격리성: 동시에 수행되는 여러 트랜잭션이 서로 간섭하지 않도록 보장하는 성질
- 지속성: 트랜잭션이 성공적으로 완료한 후에 그 결과가 영구적으로 반영되는 서질을 의미함. 즉, 시스템 장애가 발생하더라도 완료된 트랜잭션 결과가 손실되지 않아야 합니다.