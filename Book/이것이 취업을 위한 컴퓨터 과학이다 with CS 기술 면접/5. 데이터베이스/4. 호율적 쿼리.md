# 호율적 쿼리

# 서브 쿼리와 조인

- 서브 쿼리: 다른 SQL문이 포함된 SQL문
- 조인: 2개의 테이블을 하나로 합치는 것을 의미함

이들은 여러 테이블에 질의하는 등 데이터베이스에 복잡한 요청을 해야할 때 유용하게 사용될 수 있습니다. 

## 조인

조인은 크게 INNER JOIN과 OUTER JOIN으로 나눌 수 있습니다. 

- INNER 조인: 테이블 A와 B의 레코드 중 조인 조건을 모두 만족하는 레코드를 결과로 반환함
- LEFT OUTER 조인: 테이블 A의 모든 레코드를 포함하고, 조인 조건을 만족하는 테이블 B의 레코드를 결과로 반환함. 조건을 만족하지 않은 B 테이블의 필드는 NULL로 채워짐
- RIGHT OUTER 조인: 테이블 B의 모든 레코드를 포함하고, 조인 조건을 만족하는 테이블 A의 레코드를 결과로 반환함. 조건을 만족하지 않는 A 테이블의 필드는 NULL로 채워짐
- FULL OUTER 조인: 테이블 A와 B의 모든 레코드를 포함하고, 조인 조건을 만족하지 않는 경우에 상대 테이블의 필드를 NULL로 채워 결과로 반환함

# 뷰

뷰는 SELECT문의 결과로 만들어진 가상의 테이블입니다. SELECT문의 결과를 뷰로 생성한 뒤, 해당 뷰에 다양한 SQL문을 실행해 볼 수 있습니다. 주로 테이블에 대한 SQL문을 단순화하기 위해 사용됨. 

뷰는 쿼리의 단순화, 재사용성을 높이기 위해 많이 사용됩니다. 여러 테이블을 조인하거나 복잡한 조건식을 사용한 SQL문을 하나의 뷰로 만들어 두면, 이후 복잡한 SQL문을 반복적으로 작성하는 대신에 보다 단순하게 동일한 결과를 얻을 수 있습니다. 

또한 뷰는 SQL문을 단순화하기 위해 사용되기도 하고, 특정 사용자에게 테이블의 특정 데이터만을 보여주고자 할 때도 사용할 수 있습니다. 

### 뷰를 사용할 때 유의점

뷰에 대한 조회(SELECT)에는 제한이 없지만, 삽입(INSERT)과 수정(UPDATE), 삭제(DELETE) 등이 불가능할 수도 있다는 점입니다. 특히 여러 테이블을 SELECT한 결과로 만들어진 뷰의 경우, 삽입/삭제/수정 연산이 제약 조건을 어기기 쉽기 때문입니다. 따라서 뷰는 조회를 목적으로 사용되는 경우가 많습니다. 

# 인덱스

인덱스는 검색 속도 향상을 목적으로 만드는 하나 이상의 테이블 필드에 대한 자료구조입니다. 

인덱스의 종류는 클러스터형 인덱스와 세컨더리 인덱스로 나뉩니다. 

### 클러스터형 인덱스

클러스터형 인덱스는 테이블당 하나씩 만들 수 있는 인덱스로, 우리가 이미 접해 본 적이 있는 유형의 인덱스입니다. 테이블 내에 기본키로 지정된 필드는 기본적인 클러스터형 인덱스로 간주됩니다. 만약 기본키가 없는 경우에는 NOT NULL 제약 조건과 UNIQUE 제약 조건이 있는 필드를 클러스터형 인덱스로 간주합니다. 

### 세컨더리 인덱스

세컨더리 인덱스는 논클러스터형 인덱스라고도 부릅니다. 세컨더리 인덱스는 클러스터형 인덱스와 달리, 테이블당 여러 개가 존재할 수 있지만 클러스터형 인덱스를 활용한 검색보다 일반적으로 느립니다.