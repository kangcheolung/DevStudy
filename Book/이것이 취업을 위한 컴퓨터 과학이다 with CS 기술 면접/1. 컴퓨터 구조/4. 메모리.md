# 메모리

## RAM

CPU는 보조기억장치에 저장된 프로그램을 곧장 가져와 실행할 수 없기 때문에 어떠한 프로그램을 실행하고자 한다면 프로그램을 보관하고 있는 보조기억장치에서 메모리로 복사해야한다. 그러기에 RAM의 용량은 컴퓨터에 큰 영향을 끼친다. 

RAM의 용량이 작으면 보조기억장치로부터 실행할 프로그램을 가지고 오는 일이 잦아져 실행 시간이 길어지지만, RAM의 용량이 충분히 크면 보조기억장치로부터 많은 데이터를 가져와 미리 RAM에 저장할 수 있기 때문에 많은 프로그램을 동시에 실행하는데 유리해진다. 

- 임의 접근(직접 접근): 저장된 요소에 순차적으로 접근할 필요 없이 임의의 위치에 곧장 접근 가능한 방식을 의미
- 순차 접근: 특정 위치에 저장된 요소에 접근하기 위해 처음부터 순차적으로 접근하는 방식이다.

RAM의 종류는 DRAM, SRAM, SDRAM, DDR SDRAM 등이 있다.

## 메모리 종류

### DRAM

DRAM의 동적인은 말 그대로 저장된 데이터가 동적으로 변하는 특성을 의미한다 . 즉 **DRAM은 시간이 지나면 저장된 데이터가 점차 사라지는 RAM**이다. 그렇기 때문에 데이터의 소멸을 막기 위해 일정 주기로 데이터를 다시 저장해야한다. 

이러한 단점에도 DRAM을 메모리로 사용하는 것이 일반적인데 비교적 소비전력이 낮고, 저렴하며, 집적도가 높아 메모리를 대용량으로 설계하기에 용이하기 때문이다. 

### SRAM

SRAM의 정적인은 DRAM과 달리, 저장된 데이터가 변하지 않는 RAM을 이미한다. 즉 **시간이 지나도 저장된 데이터가 사라지지 않는 RAM이다. 저장된 데이터가 사라지지 않는다고 해서 비휘발성 저장장치라는 것은 아니다. SRAM도 전원이 공급되지 않으면 저장된 내용이 소실되는 것은 마찬가지이다.** 

일반적으로 SRAM은 DRAM과 비교해 속도가 빠르지만, 소비 전력이 크고 가격도 비싼데다 집적도도 낮아 캐시메모리 등에 사용된다. 

### SDRAM

SRAM은 클럭 신호와 동기화된, 보다 발전된 형태의 DRAM을 말한다. 

클럭 신호와 동기화되었다는 것은 클럭 타이밍에 맞춰 CPU와 정보를 주고 받을 수 있다는 것을 의미한다. 

### DDR SDRAM

DDR SDRAM은 대역폭을 넓혀 속도를 빠르게 만든 SDRAM이다. 대역폭 이란 ‘데이터를 주고 받을 길의 너비’를 말한다. SDRAM이 한 클럭당 한 번씩 CPU와 데이터를 주고 받을 수 있다면, DDR SDRAM은 두 배의 대역폭으로 한 클럭당 두 번씩 CPU와 데이터를 주고 받을 수 있다.

## 빅 엔디안과 리틀 엔디안

메모리에 바이트를 저장하는 방식응 연속해서 저장해야 하는 바이트를 어떤 순서로 저장하는지에 따라 빅 엔디안과 리틀 엔디안으로 나눌 수 있다. 

### 빅 엔디안

빅 엔디안은 낮은 번지의 주소에 상위 바이트를 저장하는 방식을 말한다. 여기서 상위 바이트는 가장 큰 값이라고 생각해도 된다. 

### 리틀 엔디안

리틀 엔디안은 낮은 번지의 주소에 하위 바이트부터 저장하는 방식이다. 하위 바이트는 상위 바이트와 반대로, 가장 작은 값을 의미한다. 

### MSB와 LSB

MSB는 숫자의 크기에 가장 큰 영향을 미치는 유효 숫자, 쉽게 말해 가장 왼쪽에 잇는 비트를 말하고, LSB는 숫자의 크기에 가장 적은 영향을 미치는 숫자, 쉽게 말해 가장 오른쪽에 있는 비트를 말한다. 

예를 들어 10진수 123에서 MSB는 1이고 LSB는 3이다. 

---

# 캐시 메모리

캐시 메모리는 CPU의 연산 속도와 메모리의 접근 속도의 차이를 줄이기 위해 탄생한 저장장치로, CPU와 메모리 사이에 위치한 SRAM 기반의 저장장치이다. 

## L1, L2, L3캐시

컴퓨터 내부에는 여러 종류의 캐시 메모리가 있다. 이 중 코어(CPU)와 가장 가까운 캐시 메모리를 L1캐시, 그 다음으로 가까운 순으로 L2캐시, L3캐시라고 부른다. 

- 캐시 메모리의 크기는 L1 <L2 <L3 순으로 크고, 속도는 L3 <L2 <L1 순으로 빠르다.
- 코어와 가장 가까운 L1 캐시 메모리는 명령어만 저장하는 L1캐시인 L1I캐시와 데이터만 저장하는 L1D 캐시로 구분하기도 하며, 이러한 유형의 캐시 메모리를 분리형 캐시라고 한다.

## 캐시 히트와 캐시 미스

보조기억장치가 전원이 꺼져도 보관할 것을 저장하고, 메모리에 실행 중인 것을 저장한다면 캐시 메모리는 CPU가 사용할 만한 것들을 저장한다. 

- 캐시 히트: 캐시 메모리가 예측하여 저장한 데이터가 CPU에 의해서 실제로 사용되는 경우를 캐시 히트라고한다.
- 캐시 미스: 자주 사용될 것으로 예측하여 캐시 메모리에 저장했지만 틀린 예측으로 인해 CPU가 메모리로부터 필요한 데이터를 직접 가져와야 하는 경우를 캐시 미스라고 한다.

### 참조 지역성의 원리

캐시 메모리는 참조 지역성의 원리라는 특정한 원칙에 따라 메모리로 부터 가져올 데이터를 결정한다. 

- 시간 지역성: CPU는 최근에 접근했던 메모리 공간에 다시 접근하려는 경향이 있다.
- 공간 지역성: CPU는 접근한 메모리 공간의 근처에 접근하려는 경향이 있다.

시간 지역성의 사례로는 변수가 있다. 일반적으로 변수에 저장된 값은 한 번만 사용되지 않고, 프로그램이 실행되는 동안 여러 번 사용된다. 즉, CPU는 최근에 접근했던 메모리 공간에 여러 번 다시 접근할 수 있다. 

공간 지역성의 사례로는 배열이 있다. 

## 캐시 메모리의 쓰기 정책과 일관성

CPU는 캐시 메모리에 데이터를 쓸 때는 캐시 메모리에 새롭게 쓰여진 데이터와 메모리 상의 데이터가 일관성을 유지해야한다. 

### 즉시 쓰기

즉시 쓰기는 캐시 메모리와 메모리에 동시에 쓰는 방법

- 장점:  메모리를 항상 최신 상태로 유지하여 캐시 메모리와 메모리 간의 일관성이 깨지는 상황을 방지할 수 있다.
- 단점: 데이터를 쓸때마다 매모리를 참조해야 하므로 버스의 사용 시간과 쓰기 시간이 늘어난다는 단점이 있다.

### 지연 쓰기

지연 쓰기는 캐시 메모리에만 값을 써 두었다가 추후 수정된 데이터를 한 번에 메모리에 반영하는 방법

- 장점: 메모리 접근 횟수를 줄일 수 있어 즉시 쓰기에 비해 속도는 빠르다
- 단점: 메모리와 캐시 메모리 간의 일관성이 깨질 수 있다는 위험이 있다.